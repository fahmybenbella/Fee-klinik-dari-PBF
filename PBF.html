<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Tagihan Klinik</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            background-color: white;
            padding: 2em;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 700px;
        }
        h2 {
            text-align: center;
            color: #333;
        }
        .form-group {
            display: flex;
            align-items: center;
            margin-bottom: 1.5em;
        }
        .form-group label {
            flex: 1;
            margin-right: 1em;
            color: #555;
            min-width: 120px;
        }
        .input-group {
            display: flex;
            align-items: center;
            flex: 2;
            gap: 5px;
        }
        .input-group input, .input-group select {
            padding: 0.75em;
            border: 1px solid #ccc;
            box-sizing: border-box;
            border-radius: 4px;
        }
        .input-group .value-input {
            width: 30%;
            border-radius: 4px 0 0 4px;
        }
        .input-group .operator-select {
            width: 15%;
            border-left: none;
            border-radius: 0;
            text-align: center;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="gray" d="M7 10l5 5 5-5z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 8px center;
        }
        .input-group .percent-input {
            width: 20%;
            border-left: none;
            border-radius: 0;
            text-align: center;
        }
        .full-width {
            width: 100%;
        }
        #hasil-container {
            margin-top: 2em;
        }
        #keterangan-hasil {
            width: 100%;
            height: 150px;
            padding: 1em;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            background-color: #e9e9e9;
            font-family: monospace;
            white-space: pre-wrap;
            overflow-y: auto;
        }
        .fee-inputs {
            display: flex;
            flex-wrap: nowrap;
            width: 100%;
            align-items: center;
            gap: 5px;
        }
        .fee-inputs input, .fee-inputs select {
            flex: 1;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Kalkulator Tagihan Klinik</h2>
    <div class="form-group">
        <label for="tanggal">Tanggal:</label>
        <div class="input-group full-width">
            <input type="date" id="tanggal" name="tanggal">
        </div>
    </div>
    <div class="form-group">
        <label for="merk">Merk:</label>
        <div class="input-group full-width">
            <select id="merk" name="merk">
                <option value="" disabled selected>Pilih Merk</option>
                <option value="sanbe">Sanbe</option>
                <option value="lapi">Lapi</option>
                <option value="dexa edi">Dexa Edi</option>
                <option value="dexa memet">Dexa Memet</option>
            </select>
        </div>
    </div>
    <div class="form-group">
        <label for="hna">HNA:</label>
        <div class="input-group">
            <input type="number" id="hna-value" class="value-input" placeholder="Rp" oninput="updateResults()">
            <select id="hna-operator" class="operator-select" onchange="updateResults()">
                <option value="*">*</option>
                <option value="+">+</option>
                <option value="-">-</option>
                <option value="/">/</option>
            </select>
            <input type="number" id="hna-percent" class="percent-input" placeholder="%" oninput="updateResults()">
        </div>
    </div>
    <div class="form-group">
        <label for="total-value">Total Tagihan:</label>
        <div class="input-group">
            <input type="number" id="total-value" class="value-input" placeholder="Rp" oninput="updateResults()">
            <select id="total-operator" class="operator-select" onchange="updateResults()">
                <option value="*">*</option>
                <option value="+">+</option>
                <option value="-">-</option>
                <option value="/">/</option>
            </select>
            <input type="number" id="total-percent" class="percent-input" placeholder="%" oninput="updateResults()">
        </div>
    </div>
    <div class="form-group">
        <label for="irman-ppn-value">Tagihan Irman (PPN 11%):</label>
        <div class="input-group">
            <input type="number" id="irman-ppn-value" class="value-input" placeholder="Rp" oninput="updateResults()">
        </div>
    </div>
    <div class="form-group">
        <label for="irman-calc-value">Tagihan Irman (persen):</label>
        <div class="input-group">
            <input type="number" id="irman-calc-value" class="value-input" placeholder="Rp" oninput="updateResults()">
            <select id="irman-calc-operator" class="operator-select" onchange="updateResults()">
                <option value="*">*</option>
                <option value="+">+</option>
                <option value="-">-</option>
                <option value="/">/</option>
            </select>
            <input type="number" id="irman-calc-percent" class="percent-input" placeholder="%" oninput="updateResults()">
        </div>
    </div>
    <div class="form-group">
        <label for="fee-value-group">Fee Klinik:</label>
        <div class="fee-inputs">
            <input type="number" id="fee-value-1" placeholder="Nominal 1" oninput="updateResults()">
            <select id="fee-operator-1" onchange="updateResults()">
                <option value="+">+</option>
                <option value="-">-</option>
                <option value="*">*</option>
                <option value="/">/</option>
            </select>
            <input type="number" id="fee-value-2" placeholder="Nominal 2" oninput="updateResults()">
        </div>
    </div>
    <div class="form-group">
        <label for="fee-fix-value-group">Fee Klinik Fix:</label>
        <div class="fee-inputs">
            <input type="number" id="fee-fix-value-1" placeholder="Nominal 1" oninput="updateResults()">
            <select id="fee-fix-operator" onchange="updateResults()">
                <option value="+">+</option>
                <option value="-">-</option>
                <option value="*">*</option>
                <option value="/">/</option>
            </select>
            <input type="number" id="fee-fix-value-2" placeholder="Nominal 2" oninput="updateResults()">
        </div>
    </div>

    <div id="hasil-container">
        <label for="keterangan-hasil">Keterangan Hasil:</label>
        <textarea id="keterangan-hasil" readonly></textarea>
    </div>
</div>

<script>
    function performCalculation(value, percent, operator) {
        if (isNaN(value) || isNaN(percent)) {
            return null;
        }

        let result = 0;
        switch (operator) {
            case '*':
                result = value * (percent / 100);
                break;
            case '+':
                result = value + (value * percent / 100);
                break;
            case '-':
                result = value - (value * percent / 100);
                break;
            case '/':
                if (percent === 0) {
                    return 'Tidak bisa dibagi 0';
                }
                result = value / (percent / 100);
                break;
        }
        return result.toFixed(2);
    }

    function updateResults() {
        const hnaValue = parseFloat(document.getElementById('hna-value').value) || 0;
        const hnaPercent = parseFloat(document.getElementById('hna-percent').value) || 0;
        const hnaOperator = document.getElementById('hna-operator').value;

        const totalValue = parseFloat(document.getElementById('total-value').value) || 0;
        const totalPercent = parseFloat(document.getElementById('total-percent').value) || 0;
        const totalOperator = document.getElementById('total-operator').value;

        // Perhitungan untuk Tagihan Irman
        const irmanPPNValue = parseFloat(document.getElementById('irman-ppn-value').value) || 0;
        const irmanPPNResult = (irmanPPNValue + (irmanPPNValue * 0.11)).toFixed(2);

        const irmanCalcValue = parseFloat(document.getElementById('irman-calc-value').value) || 0;
        const irmanCalcPercent = parseFloat(document.getElementById('irman-calc-percent').value) || 0;
        const irmanCalcOperator = document.getElementById('irman-calc-operator').value;
        const irmanCalcResult = performCalculation(irmanCalcValue, irmanCalcPercent, irmanCalcOperator);
        
        // Perhitungan Fee Klinik
        let feeValue1 = parseFloat(document.getElementById('fee-value-1').value) || 0;
        let feeValue2 = parseFloat(document.getElementById('fee-value-2').value) || 0;
        const feeOperator1 = document.getElementById('fee-operator-1').value;

        let feeResult;
        switch (feeOperator1) {
            case '+': feeResult = feeValue1 + feeValue2; break;
            case '-': feeResult = feeValue1 - feeValue2; break;
            case '*': feeResult = feeValue1 * feeValue2; break;
            case '/': feeResult = (feeValue2 !== 0) ? feeValue1 / feeValue2 : 'NaN'; break;
        }

        // Perhitungan Fee Klinik Fix
        let feeFixValue1 = parseFloat(document.getElementById('fee-fix-value-1').value) || 0;
        let feeFixValue2 = parseFloat(document.getElementById('fee-fix-value-2').value) || 0;
        const feeFixOperator = document.getElementById('fee-fix-operator').value;
        
        let feeFixResult;
        switch (feeFixOperator) {
            case '+': feeFixResult = feeFixValue1 + feeFixValue2; break;
            case '-': feeFixResult = feeFixValue1 - feeFixValue2; break;
            case '*': feeFixResult = feeFixValue1 * feeFixValue2; break;
            case '/': feeFixResult = (feeFixValue2 !== 0) ? feeFixValue1 / feeFixValue2 : 'NaN'; break;
        }

        const hnaResult = performCalculation(hnaValue, hnaPercent, hnaOperator);
        const totalResult = performCalculation(totalValue, totalPercent, totalOperator);
        const feeResultFormatted = (typeof feeResult === 'number') ? feeResult.toFixed(2) : feeResult;
        const feeFixResultFormatted = (typeof feeFixResult === 'number') ? feeFixResult.toFixed(2) : feeFixResult;

        let resultText = '';
        resultText += 'Hasil HNA: ' + (hnaResult !== null ? hnaResult : 'Masukkan data lengkap') + '\n';
        resultText += 'Hasil Total Tagihan: ' + (totalResult !== null ? totalResult : 'Masukkan data lengkap') + '\n';
        resultText += 'Hasil Tagihan Irman (PPN 11%): ' + (irmanPPNResult > 0 ? irmanPPNResult : 'Masukkan nominal') + '\n';
        resultText += 'Hasil Tagihan Irman (persen): ' + (irmanCalcResult !== null ? irmanCalcResult : 'Masukkan data lengkap') + '\n';
        resultText += 'Hasil Fee Klinik: ' + feeResultFormatted + '\n';
        resultText += 'Hasil Fee Klinik Fix: ' + feeFixResultFormatted + '\n';
        
        document.getElementById('keterangan-hasil').value = resultText;
    }
</script>

</body>
</html>
